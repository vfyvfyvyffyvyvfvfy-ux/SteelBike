# –ö–æ–Ω—Å—Ç–∏—Ç—É—Ü–∏—è –ø—Ä–æ–µ–∫—Ç–∞ SteelBike

## –í–≤–µ–¥–µ–Ω–∏–µ

–≠—Ç–æ—Ç –¥–æ–∫—É–º–µ–Ω—Ç —è–≤–ª—è–µ—Ç—Å—è "–∫–æ–Ω—Å—Ç–∏—Ç—É—Ü–∏–µ–π" –ø—Ä–æ–µ–∫—Ç–∞ SteelBike - –ø–æ–ª–Ω—ã–º –æ–ø–∏—Å–∞–Ω–∏–µ–º –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã, –ø—Ä–∏–Ω—Ü–∏–ø–æ–≤, —Å—Ç—Ä—É–∫—Ç—É—Ä—ã –∏ –ø—Ä–∞–≤–∏–ª —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏ —Å–∏—Å—Ç–µ–º—ã –∞—Ä–µ–Ω–¥—ã —ç–ª–µ–∫—Ç—Ä–æ–≤–µ–ª–æ—Å–∏–ø–µ–¥–æ–≤. –î–æ–∫—É–º–µ–Ω—Ç —Å–ª—É–∂–∏—Ç –µ–¥–∏–Ω—ã–º –∏—Å—Ç–æ—á–Ω–∏–∫–æ–º –∏—Å—Ç–∏–Ω—ã –¥–ª—è –≤—Å–µ—Ö —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–æ–≤ –∏ –∑–∞–∏–Ω—Ç–µ—Ä–µ—Å–æ–≤–∞–Ω–Ω—ã—Ö —Å—Ç–æ—Ä–æ–Ω.

## 1. –û–±–∑–æ—Ä –ø—Ä–æ–µ–∫—Ç–∞

### 1.1 –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ
SteelBike - —ç—Ç–æ –≤–µ–±-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –∏ Telegram-–±–æ—Ç –¥–ª—è –∞—Ä–µ–Ω–¥—ã —ç–ª–µ–∫—Ç—Ä–æ–≤–µ–ª–æ—Å–∏–ø–µ–¥–æ–≤ –≤ –≥–æ—Ä–æ–¥–∞—Ö –†–æ—Å—Å–∏–∏ (–ú–æ—Å–∫–≤–∞, –°–∞–Ω–∫—Ç-–ü–µ—Ç–µ—Ä–±—É—Ä–≥).

### 1.2 –ö–ª—é—á–µ–≤—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏
- –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π —á–µ—Ä–µ–∑ Telegram Web App
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —Ä–∞—Å–ø–æ–∑–Ω–∞–≤–∞–Ω–∏–µ –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤ (OCR) —Å –ø–æ–º–æ—â—å—é Google Gemini AI
- –ë—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ –∏ –∞—Ä–µ–Ω–¥–∞ —ç–ª–µ–∫—Ç—Ä–æ–≤–µ–ª–æ—Å–∏–ø–µ–¥–æ–≤
- –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å –ø–ª–∞—Ç–µ–∂–Ω–æ–π —Å–∏—Å—Ç–µ–º–æ–π –ÆKassa
- –ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–∏–≤–Ω–∞—è –ø–∞–Ω–µ–ª—å –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –∞—Ä–µ–Ω–¥–æ–π
- –°–∏—Å—Ç–µ–º–∞ –ø–æ–¥–¥–µ—Ä–∂–∫–∏ –∫–ª–∏–µ–Ω—Ç–æ–≤
- –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –¥–æ–≥–æ–≤–æ—Ä–æ–≤ –∞—Ä–µ–Ω–¥—ã
- –û—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–µ –≤–µ–ª–æ—Å–∏–ø–µ–¥–æ–≤ –Ω–∞ –∫–∞—Ä—Ç–µ

### 1.3 –¶–µ–ª–µ–≤–∞—è –∞—É–¥–∏—Ç–æ—Ä–∏—è
- **–ö–ª–∏–µ–Ω—Ç—ã**: –≥—Ä–∞–∂–¥–∞–Ω–µ –†–§ –∏ –∏–Ω–æ—Å—Ç—Ä–∞–Ω–Ω—ã–µ –≥—Ä–∞–∂–¥–∞–Ω–µ (—Å –ø–∞—Ç–µ–Ω—Ç–æ–º) 18+ –ª–µ—Ç
- **–ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä—ã**: –æ–ø–µ—Ä–∞—Ç–æ—Ä—ã, —É–ø—Ä–∞–≤–ª—è—é—â–∏–µ –ø–∞—Ä–∫–æ–º –≤–µ–ª–æ—Å–∏–ø–µ–¥–æ–≤
- **–ò–Ω–≤–µ—Å—Ç–æ—Ä—ã**: –ø–∞—Ä—Ç–Ω–µ—Ä—ã, –æ—Ç—Å–ª–µ–∂–∏–≤–∞—é—â–∏–µ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É

## 2. –¢–µ—Ö–Ω–æ–ª–æ–≥–∏—á–µ—Å–∫–∏–π —Å—Ç–µ–∫

### 2.1 Frontend
- **HTML5/CSS3/JavaScript** (Vanilla JS, –±–µ–∑ —Ñ—Ä–µ–π–º–≤–æ—Ä–∫–æ–≤)
- **Telegram Web App API** - –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å Telegram
- **Yandex Maps API** - –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –∫–∞—Ä—Ç—ã –∏ –≤–µ–ª–æ—Å–∏–ø–µ–¥–æ–≤
- **Supabase JS Client** - —Ä–∞–±–æ—Ç–∞ —Å –±–∞–∑–æ–π –¥–∞–Ω–Ω—ã—Ö
- **Service Worker** - PWA —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å

### 2.2 Backend
- **Vercel Serverless Functions** (Node.js) - –æ—Å–Ω–æ–≤–Ω–æ–π API
- **Render.com** - OCR Worker –∏ –∫–æ–Ω—Ç—Ä–∞–∫—Ç–Ω—ã–π —Å–µ—Ä–≤–∏—Å
- **Python (aiogram)** - Telegram –±–æ—Ç
- **Supabase (PostgreSQL + PostGIS)** - –±–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö
- **Supabase Storage** - —Ö—Ä–∞–Ω–µ–Ω–∏–µ —Ñ–∞–π–ª–æ–≤

### 2.3 –í–Ω–µ—à–Ω–∏–µ —Å–µ—Ä–≤–∏—Å—ã
- **Google Gemini AI** - —Ä–∞—Å–ø–æ–∑–Ω–∞–≤–∞–Ω–∏–µ –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤ (OCR)
- **–ÆKassa** - –ø–ª–∞—Ç–µ–∂–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞
- **Telegram Bot API** - —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –∏ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è
- **Yandex Maps** - –≥–µ–æ–ª–æ–∫–∞—Ü–∏—è

### 2.4 –ò–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–∞
- **Hosting**: Vercel (frontend + API)
- **Database**: Supabase (PostgreSQL)
- **Workers**: Render.com
- **Bot**: Render.com –∏–ª–∏ VPS
- **CDN**: Vercel Edge Network

## 3. –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ —Å–∏—Å—Ç–µ–º—ã

### 3.1 –ú–∏–∫—Ä–æ—Å–µ—Ä–≤–∏—Å–Ω–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞

```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ                    –ö–õ–ò–ï–ù–¢–´                               ‚îÇ
‚îÇ  Telegram Web App  ‚îÇ  Telegram Bot  ‚îÇ  Web Browser      ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
               ‚îÇ              ‚îÇ            ‚îÇ
               ‚ñº              ‚ñº            ‚ñº
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ              VERCEL SERVERLESS API                        ‚îÇ
‚îÇ  /api/auth  ‚îÇ  /api/user  ‚îÇ  /api/payments  ‚îÇ  /api/admin‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
               ‚îÇ              ‚îÇ            ‚îÇ
               ‚ñº              ‚ñº            ‚ñº
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ                   SUPABASE                                ‚îÇ
‚îÇ  PostgreSQL + PostGIS  ‚îÇ  Storage  ‚îÇ  Auth               ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
               ‚îÇ              ‚îÇ
               ‚ñº              ‚ñº
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ              –í–ù–ï–®–ù–ò–ï –°–ï–†–í–ò–°–´                              ‚îÇ
‚îÇ  OCR Worker (Render)  ‚îÇ  Contract Service (Render)       ‚îÇ
‚îÇ  Telegram Bot (Render)‚îÇ  –ÆKassa  ‚îÇ  Gemini AI           ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

### 3.2 –ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã —Å–∏—Å—Ç–µ–º—ã

#### 3.2.1 Frontend (Telegram Web App)
**–†–∞—Å–ø–æ–ª–æ–∂–µ–Ω–∏–µ**: `/site/`

**–û—Å–Ω–æ–≤–Ω—ã–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã**:
- `index.html` - –≥–ª–∞–≤–Ω–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞ (–∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è/—Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è)
- `map.html` - –∫–∞—Ä—Ç–∞ —Å –≤–µ–ª–æ—Å–∏–ø–µ–¥–∞–º–∏
- `profile.html` - –ø—Ä–æ—Ñ–∏–ª—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
- `stats.html` - —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –∞—Ä–µ–Ω–¥—ã
- `admin.html` - –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–∏–≤–Ω–∞—è –ø–∞–Ω–µ–ª—å
- `admin_support.html` - –ø–∞–Ω–µ–ª—å –ø–æ–¥–¥–µ—Ä–∂–∫–∏

**–ö–ª—é—á–µ–≤—ã–µ –º–æ–¥—É–ª–∏**:
- `api.js` - –æ–±–µ—Ä—Ç–∫–∞ –¥–ª—è API –∑–∞–ø—Ä–æ—Å–æ–≤
- `main.js` - –ª–æ–≥–∏–∫–∞ –≥–ª–∞–≤–Ω–æ–π —Å—Ç—Ä–∞–Ω–∏—Ü—ã
- `menu.js` - –Ω–∞–≤–∏–≥–∞—Ü–∏–æ–Ω–Ω–æ–µ –º–µ–Ω—é
- `ui.js` - UI –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã
- `transitions.js` - –∞–Ω–∏–º–∞—Ü–∏–∏ –ø–µ—Ä–µ—Ö–æ–¥–æ–≤
- `branding.js` - –±—Ä–µ–Ω–¥–∏–Ω–≥ (–ª–æ–≥–æ—Ç–∏–ø—ã, –Ω–∞–∑–≤–∞–Ω–∏—è)
- `support-chat.js` - —á–∞—Ç –ø–æ–¥–¥–µ—Ä–∂–∫–∏
- `stats.js` - —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞

#### 3.2.2 Backend API (Vercel Functions)
**–†–∞—Å–ø–æ–ª–æ–∂–µ–Ω–∏–µ**: `/api/`

**Endpoints**:
- `auth.js` - —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –∏ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è
- `user.js` - –æ–ø–µ—Ä–∞—Ü–∏–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è (–±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ, –∞—Ä–µ–Ω–¥–∞)
- `payments.js` - —Å–æ–∑–¥–∞–Ω–∏–µ –ø–ª–∞—Ç–µ–∂–µ–π
- `payment-webhook.js` - –æ–±—Ä–∞–±–æ—Ç–∫–∞ webhook –æ—Ç –ÆKassa
- `admin.js` - –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–∏–≤–Ω—ã–µ –æ–ø–µ—Ä–∞—Ü–∏–∏
- `storage.js` - —Ä–∞–±–æ—Ç–∞ —Å —Ñ–∞–π–ª–∞–º–∏
- `getTariffByBike.js` - –ø–æ–ª—É—á–µ–Ω–∏–µ —Ç–∞—Ä–∏—Ñ–∞ –ø–æ –≤–µ–ª–æ—Å–∏–ø–µ–¥—É
- `notify.js` - –æ—Ç–ø—Ä–∞–≤–∫–∞ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π
- `config.js` - –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è (–ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è)

#### 3.2.3 OCR Worker (Render)
**–†–∞—Å–ø–æ–ª–æ–∂–µ–Ω–∏–µ**: `/ocr-worker/`

**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ**: –ê—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤ —Å –ø–æ–º–æ—â—å—é Google Gemini AI

**–§—É–Ω–∫—Ü–∏–∏**:
- –°–∫–∞—á–∏–≤–∞–Ω–∏–µ —Ñ–æ—Ç–æ –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤ –∏–∑ Telegram
- –†–∞—Å–ø–æ–∑–Ω–∞–≤–∞–Ω–∏–µ –ø–∞—Å–ø–æ—Ä—Ç–æ–≤, –ø–∞—Ç–µ–Ω—Ç–æ–≤, –≤–æ–¥–∏—Ç–µ–ª—å—Å–∫–∏—Ö —É–¥–æ—Å—Ç–æ–≤–µ—Ä–µ–Ω–∏–π
- –ò–∑–≤–ª–µ—á–µ–Ω–∏–µ —Å—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö (–§–ò–û, –¥–∞—Ç–∞ —Ä–æ–∂–¥–µ–Ω–∏—è, –Ω–æ–º–µ—Ä –¥–æ–∫—É–º–µ–Ω—Ç–∞)
- –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ –≤ Supabase

#### 3.2.4 Telegram Bot (Python)
**–†–∞—Å–ø–æ–ª–æ–∂–µ–Ω–∏–µ**: `/bot.py`

**–§—É–Ω–∫—Ü–∏–∏**:
- –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π —á–µ—Ä–µ–∑ –±–æ—Ç–∞
- –°–±–æ—Ä –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤ (–ø–∞—Å–ø–æ—Ä—Ç, –ø–∞—Ç–µ–Ω—Ç, –≤–∏–¥–µ–æ-—Å–µ–ª—Ñ–∏)
- –û—Ç–ø—Ä–∞–≤–∫–∞ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π –æ —Å—Ç–∞—Ç—É—Å–µ –∞—Ä–µ–Ω–¥—ã
- –ü—Ä–∏–µ–º —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π –æ—Ç –∞–¥–º–∏–Ω–∫–∏

#### 3.2.5 Contract Service (Render)
**–†–∞—Å–ø–æ–ª–æ–∂–µ–Ω–∏–µ**: `/SteelBike-server/`

**–§—É–Ω–∫—Ü–∏–∏**:
- –ì–µ–Ω–µ—Ä–∞—Ü–∏—è PDF –¥–æ–≥–æ–≤–æ—Ä–æ–≤ –∞—Ä–µ–Ω–¥—ã
- –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –∞–∫—Ç–æ–≤ –ø—Ä–∏–µ–º–∞-–ø–µ—Ä–µ–¥–∞—á–∏
- –ó–∞–≥—Ä—É–∑–∫–∞ –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤ –≤ Supabase Storage

### 3.3 –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö (Supabase PostgreSQL)

**–û—Å–Ω–æ–≤–Ω—ã–µ —Ç–∞–±–ª–∏—Ü—ã**:

```sql
clients          -- –ö–ª–∏–µ–Ω—Ç—ã (–ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏)
bikes            -- –í–µ–ª–æ—Å–∏–ø–µ–¥—ã
batteries        -- –ë–∞—Ç–∞—Ä–µ–∏
tariffs          -- –¢–∞—Ä–∏—Ñ—ã –∞—Ä–µ–Ω–¥—ã
rentals          -- –ê—Ä–µ–Ω–¥—ã
bookings         -- –ë—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è
payments         -- –ü–ª–∞—Ç–µ–∂–∏
support_messages -- –°–æ–æ–±—â–µ–Ω–∏—è –ø–æ–¥–¥–µ—Ä–∂–∫–∏
contract_templates -- –®–∞–±–ª–æ–Ω—ã –¥–æ–≥–æ–≤–æ—Ä–æ–≤
app_settings     -- –ù–∞—Å—Ç—Ä–æ–π–∫–∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
```

**–ö–ª—é—á–µ–≤—ã–µ –ø–æ–ª—è**:

**clients**:
- `id` (uuid) - —É–Ω–∏–∫–∞–ª—å–Ω—ã–π –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä
- `telegram_user_id` (bigint) - ID –≤ Telegram
- `phone` (text) - –Ω–æ–º–µ—Ä —Ç–µ–ª–µ—Ñ–æ–Ω–∞
- `name` (text) - –§–ò–û
- `verification_status` (text) - —Å—Ç–∞—Ç—É—Å –≤–µ—Ä–∏—Ñ–∏–∫–∞—Ü–∏–∏
- `balance_rub` (numeric) - –±–∞–ª–∞–Ω—Å
- `yookassa_payment_method_id` (text) - –ø—Ä–∏–≤—è–∑–∞–Ω–Ω–∞—è –∫–∞—Ä—Ç–∞
- `autopay_enabled` (boolean) - –∞–≤—Ç–æ–ø–ª–∞—Ç–µ–∂
- `recognized_data` (jsonb) - –¥–∞–Ω–Ω—ã–µ –∏–∑ OCR

**bikes**:
- `id` (bigint) - –Ω–æ–º–µ—Ä –≤–µ–ª–æ—Å–∏–ø–µ–¥–∞
- `status` (text) - —Å—Ç–∞—Ç—É—Å (free, rented, repair, etc.)
- `location` (geometry) - –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç—ã
- `battery_id` (bigint) - ID –±–∞—Ç–∞—Ä–µ–∏
- `qr_code` (text) - QR –∫–æ–¥

**rentals**:
- `id` (uuid) - ID –∞—Ä–µ–Ω–¥—ã
- `client_id` (uuid) - ID –∫–ª–∏–µ–Ω—Ç–∞
- `bike_id` (bigint) - ID –≤–µ–ª–æ—Å–∏–ø–µ–¥–∞
- `tariff_id` (bigint) - ID —Ç–∞—Ä–∏—Ñ–∞
- `status` (text) - —Å—Ç–∞—Ç—É—Å –∞—Ä–µ–Ω–¥—ã
- `started_at` (timestamp) - –Ω–∞—á–∞–ª–æ
- `ends_at` (timestamp) - –æ–∫–æ–Ω—á–∞–Ω–∏–µ
- `contract_url` (text) - —Å—Å—ã–ª–∫–∞ –Ω–∞ –¥–æ–≥–æ–≤–æ—Ä

## 4. –ë–∏–∑–Ω–µ—Å-–ø—Ä–æ—Ü–µ—Å—Å—ã

### 4.1 –ü—Ä–æ—Ü–µ—Å—Å —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏

```
1. –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –æ—Ç–∫—Ä—ã–≤–∞–µ—Ç Telegram –±–æ—Ç–∞
2. –ù–∞–∂–∏–º–∞–µ—Ç "–ó–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞—Ç—å—Å—è"
3. –ü—Ä–∏–Ω–∏–º–∞–µ—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–æ–µ —Å–æ–≥–ª–∞—à–µ–Ω–∏–µ
4. –î–µ–ª–∏—Ç—Å—è –∫–æ–Ω—Ç–∞–∫—Ç–æ–º (—Ç–µ–ª–µ—Ñ–æ–Ω)
5. –í–≤–æ–¥–∏—Ç –§–ò–û, –¥–∞—Ç—É —Ä–æ–∂–¥–µ–Ω–∏—è
6. –í—ã–±–∏—Ä–∞–µ—Ç –≥–æ—Ä–æ–¥ (–ú–æ—Å–∫–≤–∞/–°–ü–±)
7. –í—ã–±–∏—Ä–∞–µ—Ç –≥—Ä–∞–∂–¥–∞–Ω—Å—Ç–≤–æ
8. –ó–∞–≥—Ä—É–∂–∞–µ—Ç —Ñ–æ—Ç–æ –ø–∞—Å–ø–æ—Ä—Ç–∞ (–≥–ª–∞–≤–Ω—ã–π —Ä–∞–∑–≤–æ—Ä–æ—Ç + —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è)
9. [–î–ª—è –∏–Ω–æ—Å—Ç—Ä–∞–Ω—Ü–µ–≤] –ó–∞–≥—Ä—É–∂–∞–µ—Ç –ø–∞—Ç–µ–Ω—Ç
10. [–û–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ] –ó–∞–≥—Ä—É–∂–∞–µ—Ç –≤–æ–¥–∏—Ç–µ–ª—å—Å–∫–æ–µ —É–¥–æ—Å—Ç–æ–≤–µ—Ä–µ–Ω–∏–µ
11. –£–∫–∞–∑—ã–≤–∞–µ—Ç —Ç–µ–ª–µ—Ñ–æ–Ω —ç–∫—Å—Ç—Ä–µ–Ω–Ω–æ–≥–æ –∫–æ–Ω—Ç–∞–∫—Ç–∞
12. –ó–∞–ø–∏—Å—ã–≤–∞–µ—Ç –≤–∏–¥–µ–æ-—Å–µ–ª—Ñ–∏ —Å –¥–æ–∫—É–º–µ–Ω—Ç–æ–º
13. –°–∏—Å—Ç–µ–º–∞ –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç –¥–∞–Ω–Ω—ã–µ –Ω–∞ OCR Worker
14. OCR Worker —Ä–∞—Å–ø–æ–∑–Ω–∞–µ—Ç –¥–æ–∫—É–º–µ–Ω—Ç—ã
15. –ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä –ø—Ä–æ–≤–µ—Ä—è–µ—Ç –∏ –æ–¥–æ–±—Ä—è–µ—Ç/–æ—Ç–∫–ª–æ–Ω—è–µ—Ç
16. –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –ø–æ–ª—É—á–∞–µ—Ç —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –æ —Å—Ç–∞—Ç—É—Å–µ
```

### 4.2 –ü—Ä–æ—Ü–µ—Å—Å –∞—Ä–µ–Ω–¥—ã

```
1. –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –æ—Ç–∫—Ä—ã–≤–∞–µ—Ç –∫–∞—Ä—Ç—É –≤ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏
2. –í—ã–±–∏—Ä–∞–µ—Ç —Å–≤–æ–±–æ–¥–Ω—ã–π –≤–µ–ª–æ—Å–∏–ø–µ–¥
3. –ù–∞–∂–∏–º–∞–µ—Ç "–ó–∞–±—Ä–æ–Ω–∏—Ä–æ–≤–∞—Ç—å"
4. –í—ã–±–∏—Ä–∞–µ—Ç —Ç–∞—Ä–∏—Ñ (1 –¥–µ–Ω—å, 7 –¥–Ω–µ–π, 30 –¥–Ω–µ–π)
5. –°–∏—Å—Ç–µ–º–∞ —Å–æ–∑–¥–∞–µ—Ç –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ (15 –º–∏–Ω—É—Ç)
6. –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –ø–æ–¥—Ö–æ–¥–∏—Ç –∫ –≤–µ–ª–æ—Å–∏–ø–µ–¥—É
7. –°–∫–∞–Ω–∏—Ä—É–µ—Ç QR –∫–æ–¥ –∏–ª–∏ –≤–≤–æ–¥–∏—Ç –Ω–æ–º–µ—Ä
8. –°–∏—Å—Ç–µ–º–∞ –ø—Ä–æ–≤–µ—Ä—è–µ—Ç –±–∞–ª–∞–Ω—Å/–∫–∞—Ä—Ç—É
9. –ì–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç—Å—è –¥–æ–≥–æ–≤–æ—Ä –∞—Ä–µ–Ω–¥—ã (PDF)
10. –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –ø–æ–¥–ø–∏—Å—ã–≤–∞–µ—Ç –¥–æ–≥–æ–≤–æ—Ä (—ç–ª–µ–∫—Ç—Ä–æ–Ω–Ω–∞—è –ø–æ–¥–ø–∏—Å—å)
11. –°–∏—Å—Ç–µ–º–∞ —Å–ø–∏—Å—ã–≤–∞–µ—Ç –æ–ø–ª–∞—Ç—É
12. –ê—Ä–µ–Ω–¥–∞ –∞–∫—Ç–∏–≤–∏—Ä—É–µ—Ç—Å—è
13. –í–µ–ª–æ—Å–∏–ø–µ–¥ –ø–µ—Ä–µ—Ö–æ–¥–∏—Ç –≤ —Å—Ç–∞—Ç—É—Å "rented"
14. –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –ø–æ–ª—É—á–∞–µ—Ç –¥–æ—Å—Ç—É–ø –∫ –≤–µ–ª–æ—Å–∏–ø–µ–¥—É
```

### 4.3 –ü—Ä–æ—Ü–µ—Å—Å –≤–æ–∑–≤—Ä–∞—Ç–∞

```
1. –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –≤–µ–ª–æ—Å–∏–ø–µ–¥ –≤ —Ç–æ—á–∫—É
2. –ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä –ø—Ä–∏–Ω–∏–º–∞–µ—Ç –≤–µ–ª–æ—Å–∏–ø–µ–¥
3. –ü—Ä–æ–≤–µ—Ä—è–µ—Ç —Å–æ—Å—Ç–æ—è–Ω–∏–µ (—à–∞–≥ 1: —Å—Ç–∞—Ç—É—Å - —Å–≤–æ–±–æ–¥–µ–Ω/—Ä–µ–º–æ–Ω—Ç)
4. –£–∫–∞–∑—ã–≤–∞–µ—Ç –≤—ã—è–≤–ª–µ–Ω–Ω—ã–µ –Ω–µ–¥–æ—Å—Ç–∞—Ç–∫–∏ (—à–∞–≥ 2)
5. –†–µ—à–∞–µ—Ç –æ –≤—ã—Å—Ç–∞–≤–ª–µ–Ω–∏–∏ —Å—á–µ—Ç–∞ –∑–∞ —É—â–µ—Ä–± (—à–∞–≥ 3)
6. –°–∏—Å—Ç–µ–º–∞ –≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç –∞–∫—Ç –ø—Ä–∏–µ–º–∞-–ø–µ—Ä–µ–¥–∞—á–∏
7. –°–ø–∏—Å—ã–≤–∞–µ—Ç —Å—Ä–µ–¥—Å—Ç–≤–∞ –∑–∞ —É—â–µ—Ä–± (–µ—Å–ª–∏ –µ—Å—Ç—å)
8. –û–±–Ω–æ–≤–ª—è–µ—Ç —Å—Ç–∞—Ç—É—Å –≤–µ–ª–æ—Å–∏–ø–µ–¥–∞
9. –û—Ç–ø—Ä–∞–≤–ª—è–µ—Ç —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –∫–ª–∏–µ–Ω—Ç—É
10. –ö–ª–∏–µ–Ω—Ç –ø–æ–¥–ø–∏—Å—ã–≤–∞–µ—Ç –∞–∫—Ç —Å–¥–∞—á–∏
11. –ê—Ä–µ–Ω–¥–∞ –∑–∞–≤–µ—Ä—à–∞–µ—Ç—Å—è
```

### 4.4 –ü—Ä–æ—Ü–µ—Å—Å –ø—Ä–æ–¥–ª–µ–Ω–∏—è

```
1. –ó–∞ 24 —á–∞—Å–∞ –¥–æ –æ–∫–æ–Ω—á–∞–Ω–∏—è –∞—Ä–µ–Ω–¥—ã —Å–∏—Å—Ç–µ–º–∞ –ø—Ä–æ–≤–µ—Ä—è–µ—Ç –±–∞–ª–∞–Ω—Å
2. –ï—Å–ª–∏ autopay_enabled = true:
   - –°–∏—Å—Ç–µ–º–∞ –ø—ã—Ç–∞–µ—Ç—Å—è —Å–ø–∏—Å–∞—Ç—å —Å –±–∞–ª–∞–Ω—Å–∞
   - –ï—Å–ª–∏ –Ω–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ - —Å–ø–∏—Å—ã–≤–∞–µ—Ç —Å –∫–∞—Ä—Ç—ã
   - –ü—Ä–æ–¥–ª–µ–≤–∞–µ—Ç –∞—Ä–µ–Ω–¥—É –Ω–∞ –≤—ã–±—Ä–∞–Ω–Ω—ã–π –ø–µ—Ä–∏–æ–¥
3. –ï—Å–ª–∏ autopay_enabled = false:
   - –û—Ç–ø—Ä–∞–≤–ª—è–µ—Ç —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –æ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏ –ø—Ä–æ–¥–ª–µ–Ω–∏—è
   - –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –≤—Ä—É—á–Ω—É—é –ø—Ä–æ–¥–ª–µ–≤–∞–µ—Ç —á–µ—Ä–µ–∑ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ
4. –ï—Å–ª–∏ –æ–ø–ª–∞—Ç–∞ –Ω–µ –ø—Ä–æ—à–ª–∞:
   - –ê—Ä–µ–Ω–¥–∞ –ø–µ—Ä–µ—Ö–æ–¥–∏—Ç –≤ —Å—Ç–∞—Ç—É—Å "awaiting_return"
   - –û—Ç–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –æ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏ –≤–µ—Ä–Ω—É—Ç—å –≤–µ–ª–æ—Å–∏–ø–µ–¥
```

## 5. –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

### 5.1 –ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è
- **Telegram Web App**: –ø—Ä–æ–≤–µ—Ä–∫–∞ `initData` –æ—Ç Telegram
- **Web App**: JWT —Ç–æ–∫–µ–Ω—ã (auth_token –≤ —Ç–∞–±–ª–∏—Ü–µ clients)
- **Admin Panel**: —Å–µ–∫—Ä–µ—Ç–Ω—ã–π –∫–ª—é—á (ADMIN_SECRET_KEY)
- **API**: –ø—Ä–æ–≤–µ—Ä–∫–∞ —Ç–æ–∫–µ–Ω–æ–≤ –≤ –∑–∞–≥–æ–ª–æ–≤–∫–∞—Ö

### 5.2 –ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è
- **Row Level Security (RLS)** –≤ Supabase
- –ö–ª–∏–µ–Ω—Ç—ã –≤–∏–¥—è—Ç —Ç–æ–ª—å–∫–æ —Å–≤–æ–∏ –¥–∞–Ω–Ω—ã–µ
- –ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä—ã –∏–º–µ—é—Ç –ø–æ–ª–Ω—ã–π –¥–æ—Å—Ç—É–ø —á–µ—Ä–µ–∑ service_role_key

### 5.3 –ó–∞—â–∏—Ç–∞ –¥–∞–Ω–Ω—ã—Ö
- **HTTPS** –¥–ª—è –≤—Å–µ—Ö —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–π
- **–ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è** –¥–ª—è —Å–µ–∫—Ä–µ—Ç–æ–≤
- **–•–µ—à–∏—Ä–æ–≤–∞–Ω–∏–µ** –ø–∞—Ä–æ–ª–µ–π (–µ—Å–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è)
- **–í–∞–ª–∏–¥–∞—Ü–∏—è** –≤—Å–µ—Ö –≤—Ö–æ–¥–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö

### 5.4 –ü–ª–∞—Ç–µ–∂–∏
- **PCI DSS**: —Ç–æ–∫–µ–Ω–∏–∑–∞—Ü–∏—è –∫–∞—Ä—Ç —á–µ—Ä–µ–∑ –ÆKassa
- **Webhook signature**: –ø—Ä–æ–≤–µ—Ä–∫–∞ –ø–æ–¥–ø–∏—Å–∏ –æ—Ç –ÆKassa
- **Idempotency**: –∑–∞—â–∏—Ç–∞ –æ—Ç –¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏—è –ø–ª–∞—Ç–µ–∂–µ–π

## 6. –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è

### 6.1 –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è

**Vercel (Production)**:
```
SUPABASE_URL=https://avamqfmuhiwtlumjkzmv.supabase.co
SUPABASE_ANON_KEY=<anon_key>
SUPABASE_SERVICE_ROLE_KEY=<service_role_key>
TELEGRAM_BOT_TOKEN=<bot_token>
GOOGLE_API_KEY=<gemini_api_key>
YOOKASSA_SHOP_ID=<shop_id>
YOOKASSA_SECRET_KEY=<secret_key>
OCR_WORKER_URL=https://ocr-worker.onrender.com
BOT_NOTIFY_URL=https://bot.onrender.com/notify
CONTRACTS_API_URL=https://contracts.onrender.com
ADMIN_SECRET_KEY=<admin_secret>
INTERNAL_SECRET=<internal_secret>
```

**OCR Worker (Render)**:
```
SUPABASE_URL=<url>
SUPABASE_ANON_KEY=<anon_key>
TELEGRAM_BOT_TOKEN=<bot_token>
GEMINI_API_KEY=<gemini_key>
INTERNAL_SECRET=<internal_secret>
```

**Telegram Bot (Render/VPS)**:
```
TELEGRAM_BOT_TOKEN=<bot_token>
SUPABASE_URL=<url>
SUPABASE_SERVICE_ROLE_KEY=<service_role_key>
GOOGLE_API_KEY=<gemini_key>
ADMIN_SECRET_KEY=<admin_secret>
```

### 6.2 –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–æ–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã

- `.env` - –ª–æ–∫–∞–ª—å–Ω—ã–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ (–Ω–µ –∫–æ–º–º–∏—Ç–∏—Ç—Å—è)
- `.env.example` - —à–∞–±–ª–æ–Ω –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö
- `site/config.js` - frontend –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è
- `site/config.example.js` - —à–∞–±–ª–æ–Ω frontend –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏
- `vercel.json` - –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è Vercel
- `netlify.toml` - –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è Netlify (–∞–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–∞)

## 7. –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

```
SteelBike/
‚îú‚îÄ‚îÄ .kiro/                    # Kiro IDE –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è
‚îÇ   ‚îî‚îÄ‚îÄ specs/                # –°–ø–µ—Ü–∏—Ñ–∏–∫–∞—Ü–∏–∏ —Ñ–∏—á
‚îú‚îÄ‚îÄ api/                      # Vercel Serverless Functions
‚îÇ   ‚îú‚îÄ‚îÄ admin.js              # –ê–¥–º–∏–Ω API
‚îÇ   ‚îú‚îÄ‚îÄ auth.js               # –ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è
‚îÇ   ‚îú‚îÄ‚îÄ user.js               # –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–µ –æ–ø–µ—Ä–∞—Ü–∏–∏
‚îÇ   ‚îú‚îÄ‚îÄ payments.js           # –ü–ª–∞—Ç–µ–∂–∏
‚îÇ   ‚îú‚îÄ‚îÄ payment-webhook.js    # Webhook –ÆKassa
‚îÇ   ‚îú‚îÄ‚îÄ storage.js            # –†–∞–±–æ—Ç–∞ —Å —Ñ–∞–π–ª–∞–º–∏
‚îÇ   ‚îú‚îÄ‚îÄ notify.js             # –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è
‚îÇ   ‚îú‚îÄ‚îÄ config.js             # –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è
‚îÇ   ‚îî‚îÄ‚îÄ package.json          # –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ API
‚îú‚îÄ‚îÄ site/                     # Frontend (Telegram Web App)
‚îÇ   ‚îú‚îÄ‚îÄ index.html            # –ì–ª–∞–≤–Ω–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞
‚îÇ   ‚îú‚îÄ‚îÄ map.html              # –ö–∞—Ä—Ç–∞ –≤–µ–ª–æ—Å–∏–ø–µ–¥–æ–≤
‚îÇ   ‚îú‚îÄ‚îÄ profile.html          # –ü—Ä–æ—Ñ–∏–ª—å
‚îÇ   ‚îú‚îÄ‚îÄ admin.html            # –ê–¥–º–∏–Ω –ø–∞–Ω–µ–ª—å
‚îÇ   ‚îú‚îÄ‚îÄ admin_support.html    # –ü–æ–¥–¥–µ—Ä–∂–∫–∞
‚îÇ   ‚îú‚îÄ‚îÄ stats.html            # –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞
‚îÇ   ‚îú‚îÄ‚îÄ api.js                # API –∫–ª–∏–µ–Ω—Ç
‚îÇ   ‚îú‚îÄ‚îÄ main.js               # –ì–ª–∞–≤–Ω–∞—è –ª–æ–≥–∏–∫–∞
‚îÇ   ‚îú‚îÄ‚îÄ menu.js               # –ú–µ–Ω—é
‚îÇ   ‚îú‚îÄ‚îÄ ui.js                 # UI –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã
‚îÇ   ‚îú‚îÄ‚îÄ style.css             # –°—Ç–∏–ª–∏
‚îÇ   ‚îú‚îÄ‚îÄ config.js             # –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è
‚îÇ   ‚îî‚îÄ‚îÄ manifest.json         # PWA –º–∞–Ω–∏—Ñ–µ—Å—Ç
‚îú‚îÄ‚îÄ ocr-worker/               # OCR Worker (Render)
‚îÇ   ‚îú‚îÄ‚îÄ server.js             # Express —Å–µ—Ä–≤–µ—Ä
‚îÇ   ‚îú‚îÄ‚îÄ package.json          # –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
‚îÇ   ‚îî‚îÄ‚îÄ README.md             # –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è
‚îú‚îÄ‚îÄ SteelBike-server/         # Contract Service (Render)
‚îÇ   ‚îú‚îÄ‚îÄ server.js             # Express —Å–µ—Ä–≤–µ—Ä
‚îÇ   ‚îî‚îÄ‚îÄ package.json          # –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
‚îú‚îÄ‚îÄ bot.py                    # Telegram Bot (Python)
‚îú‚îÄ‚îÄ ocr.py                    # OCR –º–æ–¥—É–ª—å
‚îú‚îÄ‚îÄ database_full_schema.sql  # –ü–æ–ª–Ω–∞—è —Å—Ö–µ–º–∞ –ë–î
‚îú‚îÄ‚îÄ database_migration.sql    # –ú–∏–≥—Ä–∞—Ü–∏–∏ –ë–î
‚îú‚îÄ‚îÄ vercel.json               # –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è Vercel
‚îú‚îÄ‚îÄ package.json              # –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –ø—Ä–æ–µ–∫—Ç–∞
‚îú‚îÄ‚îÄ .env.example              # –®–∞–±–ª–æ–Ω –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö
‚îî‚îÄ‚îÄ README-ARCHITECTURE.md    # –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã
```

## 8. –ü—Ä–∏–Ω—Ü–∏–ø—ã —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏

### 8.1 –ö–æ–¥
- **–ü—Ä–æ—Å—Ç–æ—Ç–∞**: Vanilla JS, –º–∏–Ω–∏–º—É–º –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π
- **–ß–∏—Ç–∞–µ–º–æ—Å—Ç—å**: –ø–æ–Ω—è—Ç–Ω—ã–µ –∏–º–µ–Ω–∞ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –∏ —Ñ—É–Ω–∫—Ü–∏–π
- **–ú–æ–¥—É–ª—å–Ω–æ—Å—Ç—å**: —Ä–∞–∑–¥–µ–ª–µ–Ω–∏–µ –Ω–∞ –ª–æ–≥–∏—á–µ—Å–∫–∏–µ –º–æ–¥—É–ª–∏
- **DRY**: –Ω–µ –ø–æ–≤—Ç–æ—Ä—è—Ç—å—Å—è (–ø–µ—Ä–µ–∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –∫–æ–¥–∞)

### 8.2 API
- **RESTful**: –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ HTTP –º–µ—Ç–æ–¥–æ–≤ –ø–æ –Ω–∞–∑–Ω–∞—á–µ–Ω–∏—é
- **JSON**: –≤—Å–µ –¥–∞–Ω–Ω—ã–µ –≤ —Ñ–æ—Ä–º–∞—Ç–µ JSON
- **–û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫**: –≤—Å–µ–≥–¥–∞ –≤–æ–∑–≤—Ä–∞—â–∞—Ç—å –ø–æ–Ω—è—Ç–Ω—ã–µ –æ—à–∏–±–∫–∏
- **–í–∞–ª–∏–¥–∞—Ü–∏—è**: –ø—Ä–æ–≤–µ—Ä–∫–∞ –≤—Å–µ—Ö –≤—Ö–æ–¥–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö

### 8.3 –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö
- **–ù–æ—Ä–º–∞–ª–∏–∑–∞—Ü–∏—è**: –∏–∑–±–µ–≥–∞—Ç—å –¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö
- **–ò–Ω–¥–µ–∫—Å—ã**: –Ω–∞ —á–∞—Å—Ç–æ –∏—Å–ø–æ–ª—å–∑—É–µ–º—ã–µ –ø–æ–ª—è
- **–¢—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏**: –¥–ª—è –∫—Ä–∏—Ç–∏—á–Ω—ã—Ö –æ–ø–µ—Ä–∞—Ü–∏–π
- **RLS**: –∑–∞—â–∏—Ç–∞ –¥–∞–Ω–Ω—ã—Ö –Ω–∞ —É—Ä–æ–≤–Ω–µ –ë–î

### 8.4 UI/UX
- **Telegram Design**: —Å–ª–µ–¥–æ–≤–∞–Ω–∏–µ –≥–∞–π–¥–ª–∞–π–Ω–∞–º Telegram
- **–ê–¥–∞–ø—Ç–∏–≤–Ω–æ—Å—Ç—å**: —Ä–∞–±–æ—Ç–∞ –Ω–∞ –≤—Å–µ—Ö —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞—Ö
- **–ë—ã—Å—Ç—Ä–æ—Ç–∞**: –º–∏–Ω–∏–º–∞–ª—å–Ω–æ–µ –≤—Ä–µ–º—è –∑–∞–≥—Ä—É–∑–∫–∏
- **–ü–æ–Ω—è—Ç–Ω–æ—Å—Ç—å**: –∏–Ω—Ç—É–∏—Ç–∏–≤–Ω—ã–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å

## 9. Deployment

### 9.1 Vercel (Frontend + API)
```bash
# –£—Å—Ç–∞–Ω–æ–≤–∫–∞ Vercel CLI
npm i -g vercel

# –î–µ–ø–ª–æ–π
vercel --prod

# –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è
vercel env add SUPABASE_URL
vercel env add SUPABASE_SERVICE_ROLE_KEY
# ... –æ—Å—Ç–∞–ª—å–Ω—ã–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ
```

### 9.2 Render (OCR Worker, Bot, Contracts)
1. –ü–æ–¥–∫–ª—é—á–∏—Ç—å GitHub —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π
2. –°–æ–∑–¥–∞—Ç—å Web Service
3. –£–∫–∞–∑–∞—Ç—å –∫–æ–º–∞–Ω–¥—É –∑–∞–ø—É—Å–∫–∞: `node server.js` –∏–ª–∏ `python bot.py`
4. –î–æ–±–∞–≤–∏—Ç—å –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è
5. –î–µ–ø–ª–æ–π –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø—Ä–∏ push –≤ main

### 9.3 Supabase
1. –°–æ–∑–¥–∞—Ç—å –ø—Ä–æ–µ–∫—Ç –Ω–∞ supabase.com
2. –ü—Ä–∏–º–µ–Ω–∏—Ç—å —Å—Ö–µ–º—É: `database_full_schema.sql`
3. –ü—Ä–∏–º–µ–Ω–∏—Ç—å –º–∏–≥—Ä–∞—Ü–∏–∏: `database_migration.sql`
4. –ù–∞—Å—Ç—Ä–æ–∏—Ç—å Storage buckets: `passports`, `contracts`
5. –ù–∞—Å—Ç—Ä–æ–∏—Ç—å RLS –ø–æ–ª–∏—Ç–∏–∫–∏

## 10. –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –∏ –ø–æ–¥–¥–µ—Ä–∂–∫–∞

### 10.1 –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ
- **Vercel**: –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ –ª–æ–≥–∏ —Ñ—É–Ω–∫—Ü–∏–π
- **Render**: –ª–æ–≥–∏ –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏
- **Supabase**: –ª–æ–≥–∏ –∑–∞–ø—Ä–æ—Å–æ–≤ –∫ –ë–î

### 10.2 –û—à–∏–±–∫–∏
- **Sentry** (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ): –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–µ –æ—à–∏–±–æ–∫
- **Console logs**: –¥–ª—è –æ—Ç–ª–∞–¥–∫–∏
- **Error boundaries**: –æ–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫ –≤ UI

### 10.3 –ú–µ—Ç—Ä–∏–∫–∏
- **Vercel Analytics**: –ø–æ—Å–µ—â–∞–µ–º–æ—Å—Ç—å
- **Supabase Dashboard**: –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –ë–î
- **Custom metrics**: –≤ —Ç–∞–±–ª–∏—Ü–µ app_settings

## 11. Roadmap

### 11.1 –¢–µ–∫—É—â–∏–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏ (v1.0)
- ‚úÖ –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è —á–µ—Ä–µ–∑ Telegram
- ‚úÖ OCR –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤
- ‚úÖ –ë—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ –∏ –∞—Ä–µ–Ω–¥–∞
- ‚úÖ –ü–ª–∞—Ç–µ–∂–∏ —á–µ—Ä–µ–∑ –ÆKassa
- ‚úÖ –ê–¥–º–∏–Ω –ø–∞–Ω–µ–ª—å
- ‚úÖ –ü–æ–¥–¥–µ—Ä–∂–∫–∞ –∫–ª–∏–µ–Ω—Ç–æ–≤
- ‚úÖ –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –¥–æ–≥–æ–≤–æ—Ä–æ–≤

### 11.2 –ü–ª–∞–Ω–∏—Ä—É–µ–º—ã–µ —É–ª—É—á—à–µ–Ω–∏—è (v1.1)
- üîÑ Push-—É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è
- üîÑ –†–µ—Ñ–µ—Ä–∞–ª—å–Ω–∞—è –ø—Ä–æ–≥—Ä–∞–º–º–∞
- üîÑ –°–∏—Å—Ç–µ–º–∞ —Å–∫–∏–¥–æ–∫ –∏ –ø—Ä–æ–º–æ–∫–æ–¥–æ–≤
- üîÑ –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å IoT (—É–º–Ω—ã–µ –∑–∞–º–∫–∏)
- üîÑ –ú–æ–±–∏–ª—å–Ω–æ–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ (iOS/Android)

### 11.3 –î–æ–ª–≥–æ—Å—Ä–æ—á–Ω—ã–µ –ø–ª–∞–Ω—ã (v2.0)
- üìÖ –†–∞—Å—à–∏—Ä–µ–Ω–∏–µ –Ω–∞ –¥—Ä—É–≥–∏–µ –≥–æ—Ä–æ–¥–∞
- üìÖ –§—Ä–∞–Ω—à–∏–∑–∞
- üìÖ API –¥–ª—è –ø–∞—Ä—Ç–Ω–µ—Ä–æ–≤
- üìÖ –ê–Ω–∞–ª–∏—Ç–∏–∫–∞ –∏ ML –¥–ª—è –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏

## 12. –ö–æ–Ω—Ç–∞–∫—Ç—ã –∏ –ø–æ–¥–¥–µ—Ä–∂–∫–∞

### 12.1 –ö–æ–º–∞–Ω–¥–∞
- **–†–∞–∑—Ä–∞–±–æ—Ç–∫–∞**: [–í–∞—à–µ –∏–º—è]
- **–ü–æ–¥–¥–µ—Ä–∂–∫–∞**: support@SteelBike.ru
- **Telegram**: @SteelBike_support

### 12.2 –†–µ—Å—É—Ä—Å—ã
- **GitHub**: [—Å—Å—ã–ª–∫–∞ –Ω–∞ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π]
- **–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è**: [—Å—Å—ã–ª–∫–∞ –Ω–∞ docs]
- **Telegram –∫–∞–Ω–∞–ª**: [—Å—Å—ã–ª–∫–∞ –Ω–∞ –∫–∞–Ω–∞–ª]

---

**–í–µ—Ä—Å–∏—è –¥–æ–∫—É–º–µ–Ω—Ç–∞**: 1.0  
**–î–∞—Ç–∞ –ø–æ—Å–ª–µ–¥–Ω–µ–≥–æ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è**: 06.10.2025  
**–ê–≤—Ç–æ—Ä**: SteelBike Team
